@model EniacSpi.Models.HostNetworkInfiltrationStatusModel

<script type="text/javascript">
    $(function () {
        var es = new EventSource('@Url.Action("NetworkInfiltrationStatusChanged", "Host", new { Name = ViewBag.HostName })');
        es.onmessage = function (e) {
            var Status = JSON.parse(e.data);
            $('#NetworkInfiltrationCondition').text(Status.Condition);

            var table = $('#InfiltrationStatus tbody');
            table.empty();

            $.each(Status.GPUs, function (index, value) {
                table.append($('<tr>'));
                table.append($('<td>' + value.Id + '</td>'));
                table.append($('<td style="padding-left: 25px">' + value.Load + '</td>'));
                table.append($('<td style="padding-left: 25px">' + value.Speed + '</td>'));
                table.append($('<td style="padding-left: 25px">' + value.Temperature + '</td>'));
                table.append($('</tr>'));
            });
        };
        es.onerror = function () {
            console.log(arguments);
        };
    });
</script>

<br />
<label><b>Condition</b></label>
<label id="NetworkInfiltrationCondition" style="padding-left: 25px">@Html.DisplayFor(model => model.Condition)</label>
<table id="InfiltrationStatus">
    <thead>
        <tr>
            <th>Id</th>
            <th style="padding-left: 25px">Load</th>
            <th style="padding-left: 25px">Speed</th>
            <th style="padding-left: 25px">Temperature</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var gpu in Model.GPUs)
        {
            <tr>
                <td>@Html.Raw(gpu.Id.ToString())</td>
                <td style="padding-left: 25px">@Html.Raw(gpu.Load.ToString())</td>
                <td style="padding-left: 25px">@Html.Raw(gpu.Speed.ToString())</td>
                <td style="padding-left: 25px">@Html.Raw(gpu.Temperature.ToString())</td>
            </tr>
        }
    </tbody>
</table>
