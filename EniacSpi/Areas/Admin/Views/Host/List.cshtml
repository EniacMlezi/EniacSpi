@model IEnumerable<EniacSpi.Areas.Admin.Models.HostListViewModel>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Address)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address)
        </td>
        <td>
            @Html.ActionLink("Delete", "Delete", new { Name = item.Name })
        </td>
    </tr>
}

</table>

<script type="text/javascript">
    var State = @ViewBag.State;
    function listen() {
        $.ajax({
            type: "GET",
            url: "/EniacSpi/Host/" + State+ "Listening",
            cache: false,
            success: function (result) {
                    if (State == "Resume") {
                        State = "Pause";
                    }
                    else {
                        State = "Resume";
                    }

                    $("#ListenBtn").text(State + " Listening");
            },
            error: function (result) {
                alert(result);
            }
        });
    }
</script>
<a id="ListenBtn" class="btn btn-default" onclick="listen()">@ViewBag.State Listening</a>
